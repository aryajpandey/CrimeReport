<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crime Database UI</title>
</head>
<body>

<h1>Crime Database UI</h1>

<!-- Form to Add Location -->
<form id="locationForm">
    <h2>Add Location:</h2>
    <label for="state">State:</label>
    <input type="text" id="state" name="state" required>
    <br>
    <label for="city">City:</label>
    <input type="text" id="city" name="city" required>
    <br>
    <label for="streetAddress">Street Address:</label>
    <input type="text" id="streetAddress" name="streetAddress">
    <br>
    <label for="zipCode">Zip Code:</label>
    <input type="text" id="zipCode" name="zipCode">
    <br>
    <label for="precinctId">Precinct ID:</label>
    <input type="text" id="precinctId" name="precinctId">
    <br>
    <button type="button" onclick="addLocation()">Add Location</button>
</form>

<!-- Display Locations -->
<div>
    <h2>Locations:</h2>
    <ul id="locationsList"></ul>
</div>

<script>
    // Function to add a new location using AJAX
    function addLocation() {
        var formData = {
            state: document.getElementById("state").value,
            city: document.getElementById("city").value,
            streetAddress: document.getElementById("streetAddress").value,
            zipCode: document.getElementById("zipCode").value,
            precinctId: document.getElementById("precinctId").value
        };

        fetch('/locations', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
            // Refresh the locations list after adding a new location
            getLocations();
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }

    // Function to get all locations using AJAX
    function getLocations() {
        fetch('/locations')
        .then(response => response.json())
        .then(data => {
            // Display the locations in an unordered list
            var locationsList = document.getElementById("locationsList");
            locationsList.innerHTML = "";
            data.forEach(location => {
                var listItem = document.createElement("li");
                listItem.textContent = `ID: ${location.Location_ID}, State: ${location.State}, City: ${location.City}`;
                locationsList.appendChild(listItem);
            });
        })
        .catch((error) => {
            console.error('Error:', error);
        });
    }

    // Initial load of locations
    getLocations();
</script>

</body>
</html>
